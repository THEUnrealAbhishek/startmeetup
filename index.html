<<!-- Save as codecollab_demo.html and open in browser -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>CodeCollab Demo</title>

  <!-- Make layout behave correctly on phones -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind CDN for quick styling (not for production) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Prism CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />

  <!-- React + ReactDOM -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel for JSX in browser (dev only) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- marked (markdown) and prism -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>

  <style>
    body {
      background: linear-gradient(180deg, #2b6aff, #020617);
      color: #17212e;
    }
    .card {
      background: rgba(15, 23, 42, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.04);
      border-radius: 12px;
      padding: 16px;
    }
    .btn {
      background: linear-gradient(90deg, #00d9ff, #4d00d3);
      color: rgb(0, 0, 0);
      padding: 8px 12px;
      border-radius: 8px;
      font-weight: 600;
    }
    pre {
      border-radius: 8px;
      padding: 12px;
      background: #0055ff;
      overflow: auto;
    }
  </style>
</head>
<body class="p-4 sm:p-6">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    function DemoApp() {
      const [posts, setPosts] = useState(() => {
        try {
          return JSON.parse(localStorage.getItem('demo_posts_v1')) || [];
        } catch (e) {
          return [];
        }
      });

      const [title, setTitle] = useState('');
      const [body, setBody] = useState('');
      const [code, setCode] = useState('');
      const [lang, setLang] = useState('javascript');

      useEffect(() => {
        localStorage.setItem('demo_posts_v1', JSON.stringify(posts));
        Prism.highlightAll();
      }, [posts]);

      function addPost() {
        if (!title) {
          alert('Add title');
          return;
        }
        setPosts([{ id: Date.now(), title, body, code, lang }, ...posts]);
        setTitle('');
        setBody('');
        setCode('');
      }

      return (
        <div className="max-w-3xl mx-auto space-y-6">
          <header className="flex items-center justify-between">
            <h1 className="text-2xl font-bold text-white">CodeCollab — Demo</h1>
            <div className="text-sm text-slate-300">Post ideas · share code</div>
          </header>

          <section className="card text-slate-100">
            <h2 className="font-semibold mb-2">Share an idea</h2>

            <input
              className="w-full p-2 mb-2 bg-transparent border border-slate-700 rounded outline-none text-slate-100 placeholder-slate-400"
              placeholder="Title"
              value={title}
              onChange={e => setTitle(e.target.value)}
            />

            <textarea
              className="w-full p-2 mb-2 bg-transparent border border-slate-700 rounded outline-none text-slate-100 placeholder-slate-400"
              placeholder="Describe (Markdown ok)"
              rows="3"
              value={body}
              onChange={e => setBody(e.target.value)}
            />

            <textarea
              className="w-full p-2 mb-2 bg-transparent border border-slate-700 rounded outline-none text-slate-100 placeholder-slate-400"
              placeholder="Code (optional)"
              rows="4"
              value={code}
              onChange={e => setCode(e.target.value)}
            />

            <div className="flex flex-wrap gap-2 items-center">
              <select
                value={lang}
                onChange={e => setLang(e.target.value)}
                className="p-2 bg-transparent border border-slate-700 rounded text-slate-100"
              >
                <option value="javascript">javascript</option>
                <option value="python">python</option>
                <option value="bash">bash</option>
                <option value="html">html</option>
              </select>

              <button className="btn" onClick={addPost}>
                Post
              </button>
            </div>
          </section>

          <section className="space-y-4">
            {posts.length === 0 && (
              <div className="card text-slate-100">
                No posts yet — post your idea!
              </div>
            )}

            {posts.map(p => (
              <article key={p.id} className="card text-slate-100">
                <div className="flex justify-between items-start">
                  <div>
                    <div className="text-xs text-slate-400">
                      {new Date(p.id).toLocaleString()}
                    </div>
                    <h3 className="font-semibold mt-1">{p.title}</h3>
                    <div
                      className="mt-2 prose prose-invert max-w-none"
                      dangerouslySetInnerHTML={{
                        __html: marked.parse(p.body || ''),
                      }}
                    />
                  </div>
                </div>

                {p.code && (
                  <pre className="mt-3">
                    <code className={'language-' + (p.lang || 'javascript')}>
                      {p.code}
                    </code>
                  </pre>
                )}
              </article>
            ))}
          </section>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<DemoApp />);
  </script>
</body>
</html>

